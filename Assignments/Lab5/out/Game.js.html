<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Game.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Game.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * This class represents the game
 */
class Game
{
    /**
     * This is the games constructor
     */
    constructor()
    {
        this.initCanvas();
        this.initWorld();
        //These lines are used to loop through the update and draw functions
        this.boundRecursiveUpdate = this.update.bind(this);
        this.boundDraw = this.draw.bind(this);
    }
    /**
     * This function intializes the canvas
     */
    initCanvas()
    {
        var canvas = document.createElement("canvas");

        canvas.id = 'mycanvas';
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        var ctx = canvas.getContext("2d");

        document.body.appendChild(canvas);

        ctx.font = '48px serif';
        this.ctx = ctx;
    }

    /**
     * 
     */
    initWorld()
    {
        console.log("Initialising game world");
        //The player object is created
        this.player = new Player(window.innerWidth/2,window.innerHeight/2,50);
        //The goal object is created
        this.goal = new Goal(window.innerWidth/4,window.innerHeight/4,75)
        //This line is implemented to move the player when the arrows are pressed
        document.addEventListener("keydown", this.keyDownHandler.bind(null,this.player));
        //This line is implemented to prevent the screen from scrolling
        window.addEventListener("keydown", function(e) {
            // Space and arrow keys
            if([32, 37, 38, 39, 40].indexOf(e.keyCode) > -1) {
                e.preventDefault();
            }
        }, false);
        
    }

    /**
     * This function is used to check for key events
     * @param {Object} player This is the player object
     * @param {Object} e This object represnts the event
     */
    keyDownHandler(player,e)
    {
        // Handle key events here...
        player.movement(e.keyCode);
    }

    /**
     * This function is used to carry out collision responses
     */
    collisionResponse()
    {
        this.ctx.save();
        //End Text is drawn
        this.ctx.fillStyle = "#00008B";

        this.ctx.font = 'italic 40pt Calibri';

        this.ctx.textBaseline = "top";

        this.ctx.fillText("You Win", window.innerWidth/2,window.innerHeight/2);

        ctx.restore();
    }

    /**
     * //This function is used to update the game object
     */
    update()
    {
        if(this.player.checkCollision(this.goal) == true)
        {
            this.collisionResponse();
        }

        this.boundDraw();
        //The update function is calling again by this line
        window.requestAnimationFrame(this.boundRecursiveUpdate);
    }
    /**
     * This function is used to draw the objects draw functions
     */
    draw()
    {
        //The screened cleared
        this.ctx.clearRect(0,0,window.innerWidth,window.innerHeight);
        //Object draw functions are called
        this.player.draw(this.ctx);
        this.goal.draw(this.ctx);
    }
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Game.html">Game</a></li><li><a href="Goal.html">Goal</a></li><li><a href="Player.html">Player</a></li></ul><h3>Global</h3><ul><li><a href="global.html#main">main</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Tue Oct 16 2018 11:09:05 GMT+0100 (GMT Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
